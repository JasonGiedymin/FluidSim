precision mediump float;varying vec2 v_coordinates;uniform vec2 u_gridResolution;uniform sampler2D u_velocityTexture;uniform sampler2D u_weightTexture;void a(vec2 b,float c){b.x=c;}void d(vec2 b,float c){b.y=c;}float e(vec4 f){return f[0];}float g(vec4 f){return f[1];}void h(int i,bool j,bool k){vec2 b=texture2D(u_velocityTexture,v_coordinates).rg;vec2 l=1.0/(u_gridResolution+1.0);float m=100000.0;float n=100000.0;const int o=1;for(int f=-o;f<=o;++f){if(f!=0&&i!=0){vec2 p=v_coordinates+vec2(float(f),float(i))*l;float q=float(f)*float(f)+float(i)*float(i);vec4 r=texture2D(u_weightTexture,p);if(e(r)>0.0&&q<m&&j){m=q;float s=texture2D(u_velocityTexture,p).r;a(b,s);}if(g(r)>0.0&&q<n&&k){n=q;float t=texture2D(u_velocityTexture,p).g;d(b,t);}}}gl_FragColor=vec4(b,0.0,0.0);}void u(bool j,bool k){const int o=1;for(int i=-o;i<=o;++i){h(i,j,k);}}void main(){bool j=texture2D(u_weightTexture,v_coordinates).x==0.0;bool k=texture2D(u_weightTexture,v_coordinates).y==0.0;if(j||k){u(j,k);}}