precision mediump float;varying vec2 v_coordinates;uniform vec2 u_gridResolution;uniform sampler2D u_velocityTexture;uniform sampler2D u_weightTexture;void main(){vec2 a=texture2D(u_velocityTexture,v_coordinates).rg;vec2 b=1.0/(u_gridResolution+1.0);bool c=texture2D(u_weightTexture,v_coordinates).x==0.0;bool d=texture2D(u_weightTexture,v_coordinates).y==0.0;float e=100000.0;float f=100000.0;if(c||d){const int g=1;for(int h=-g;h<=g;++h){for(int i=-g;i<=g;++i){if(i!=0&&h!=0){vec2 j=v_coordinates+vec2(float(i),float(h))*b;float k=float(i)*float(i)+float(h)*float(h);if(texture2D(u_weightTexture,j)[0]>0.0&&k<e&&c){e=k;a[0]=texture2D(u_velocityTexture,j).r;}if(texture2D(u_weightTexture,j)[1]>0.0&&k<f&&d){f=k;a[1]=texture2D(u_velocityTexture,j).g;}}}}}gl_FragColor=vec4(a,0.0,0.0);}