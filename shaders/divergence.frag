precision mediump float;vec3 a(vec3 b){return vec3(mod(gl_FragCoord.x,b.x),gl_FragCoord.y,floor(gl_FragCoord.x/b.x)+0.5);}vec4 c(sampler2D d,vec3 e,vec3 b){vec3 f=e*b;f=clamp(f,vec3(0.5),vec3(b-0.5));float g=floor(f.z-0.5);float h=g+1.0;float i=fract(f.z-0.5);vec2 j=vec2(g*b.x+f.x,f.y)/vec2(b.x*b.z,b.y);vec2 k=vec2(h*b.x+f.x,f.y)/vec2(b.x*b.z,b.y);return mix(texture2D(d,j),texture2D(d,k),i);}vec4 l(sampler2D d,vec3 e,vec3 b){vec3 f=e*b;f=clamp(f,vec3(0.5),vec3(b-0.5));float m=floor(f.z);vec2 n=vec2(m*b.x+f.x,f.y)/vec2(b.x*b.z,b.y);return texture2D(d,n);}precision mediump float;varying vec2 v_coordinates;uniform sampler2D u_velocityTexture;uniform sampler2D u_markerTexture;uniform sampler2D u_weightTexture;uniform vec3 u_gridResolution;uniform float u_maxDensity;void main(){vec3 o=floor(a(u_gridResolution));float p=l(u_markerTexture,(o+0.5)/u_gridResolution,u_gridResolution).x;if(p==0.0) discard;float q=l(u_velocityTexture,(o+0.5)/(u_gridResolution+1.0),u_gridResolution+1.0).x;float r=l(u_velocityTexture,(o+vec3(1.0,0.0,0.0)+0.5)/(u_gridResolution+1.0),u_gridResolution+1.0).x;float s=l(u_velocityTexture,(o+0.5)/(u_gridResolution+1.0),u_gridResolution+1.0).y;float t=l(u_velocityTexture,(o+vec3(0.0,1.0,0.0)+0.5)/(u_gridResolution+1.0),u_gridResolution+1.0).y;float u=l(u_velocityTexture,(o+0.5)/(u_gridResolution+1.0),u_gridResolution+1.0).z;float v=l(u_velocityTexture,(o+vec3(0.0,0.0,1.0)+0.5)/(u_gridResolution+1.0),u_gridResolution+1.0).z;float w=((r-q)+(t-s)+(v-u))/1.0;float x=l(u_weightTexture,(o+0.5)/(u_gridResolution+1.0),u_gridResolution+1.0).a;w-=max((x-u_maxDensity)*1.0,0.0);gl_FragColor=vec4(w,0.0,0.0,0.0);}