precision mediump float;uniform sampler2D u_renderingTexture;varying vec3 v_viewSpaceSpherePosition;varying float v_sphereRadius;varying float v_extrudedSphereRadius;uniform vec2 u_resolution;uniform float u_fov;const float a=3.14159265;void main(){vec2 b=gl_FragCoord.xy/u_resolution;vec4 c=texture2D(u_renderingTexture,b);vec3 d=vec3(c.x,c.y,sqrt(1.0-c.x*c.x-c.y*c.y));float e=tan(u_fov/2.0);float f=c.a;vec3 g=vec3((b.x*2.0-1.0)*e*u_resolution.x/u_resolution.y,(b.y*2.0-1.0)*e,-1.0);vec3 h=g*-f;vec3 i=v_viewSpaceSpherePosition-h;float j=length(i);float k=dot(d,i/j);float l=j/v_sphereRadius;float m=l*l;float n=1.0-m*k*k;float o=max(0.0,k)/m;if(n>0.0&&j>v_sphereRadius){o=k*acos(-k*sqrt((m-1.0)/(1.0-k*k)))-sqrt(n*(m-1.0));o=o/m+atan(sqrt(n/(m-1.0)));o/=a;}gl_FragColor=vec4(o,0.0,0.0,1.0);}